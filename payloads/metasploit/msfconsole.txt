
source msf_config.txt


USE_ECM=true          # ==============================
USE_RNDIS=true        # 
USE_HID=false         #    regular network adapter 
USE_UMS=false         # 
USE_RAWHID=false      # ==============================


function onNetworkUp(){
	echo "starting postgresql... "
	sudo systemctl start postgresql
	echo "starting msfconsole/handler... "
	# reading from .bash_profile to "register" rvm and to omit --login (which doesnt work from systemd service)
	# msfconsole -L is used because screen terminates otherwise
	screen -dmS msfconsole bash -c " \
		source ~/.bash_profile; \
		cd $MSFPATH; \
		echo \"starting msfconsole, this might take a while....\"; \
		./msfconsole -L"
}

function onLogin() {
	echo "attaching to console"
	screen -r msfconsole
}
